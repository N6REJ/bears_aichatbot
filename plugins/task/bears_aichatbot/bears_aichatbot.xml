<?xml version="1.0" encoding="utf-8"?>
<extension type="plugin" group="task" version="5.0" method="upgrade">
  <name>plg_task_bears_aichatbot</name>
  <author>N6REJ</author>
  <authorEmail>programming@hallhome.us</authorEmail>
  <authorUrl>https://hallhome.us/joomla-extensions/bears-ai-chatbot</authorUrl>
  <copyright>Copyright (C) 2025 Troy Hall (N6REJ)</copyright>
  <creationDate>2025 October 02</creationDate>
  <version>2025.10.02.2</version>
  <license>GNU General Public License version 3 or later; see License.txt</license>
  <description>Task Scheduler plugin for syncing Joomla content with the IONOS document collection.</description>
  <namespace path="src">Joomla\Plugin\Task\BearsAichatbot</namespace>
  <files>
    <filename plugin="bears_aichatbot">bears_aichatbot.php</filename>
    <folder>services</folder>
    <folder>src</folder>
    <folder>language</folder>
    <folder>sql</folder>
  </files>
  <languages>
    <language tag="en-GB">language/en-GB/en-GB.plg_task_bears_aichatbot.ini</language>
    <language tag="en-GB">language/en-GB/en-GB.plg_task_bears_aichatbot.sys.ini</language>
  </languages>

  <config>
    <fields name="params">
      <fieldset name="basic" label="PLG_TASK_BEARS_AICHATBOT_FIELDSET_BASIC">
        <field
          name="ionos_token_id"
          type="text"
          label="PLG_TASK_BEARS_AICHATBOT_TOKEN_ID"
          description="PLG_TASK_BEARS_AICHATBOT_TOKEN_ID_DESC"
        />
        <field
          name="ionos_token"
          type="password"
          label="PLG_TASK_BEARS_AICHATBOT_TOKEN"
          description="PLG_TASK_BEARS_AICHATBOT_TOKEN_DESC"
        />
        <field
          name="ionos_endpoint"
          type="text"
          label="PLG_TASK_BEARS_AICHATBOT_ENDPOINT"
          default="https://api.inference.ionos.com/v1"
        />
        <field
          name="collection_id"
          type="text"
          label="PLG_TASK_BEARS_AICHATBOT_COLLECTION_ID"
          description="PLG_TASK_BEARS_AICHATBOT_COLLECTION_ID_DESC"
        />
        <field
          name="batch_size"
          type="number"
          default="50"
          min="1"
          max="500"
          label="PLG_TASK_BEARS_AICHATBOT_BATCH_SIZE"
        />
        <field
          name="max_attempts"
          type="number"
          default="5"
          min="1"
          max="20"
          label="PLG_TASK_BEARS_AICHATBOT_MAX_ATTEMPTS"
        />
        <field
          name="selected_categories"
          type="category"
          extension="com_content"
          multiple="true"
          label="PLG_TASK_BEARS_AICHATBOT_CATEGORIES"
          description="PLG_TASK_BEARS_AICHATBOT_CATEGORIES_DESC"
        />
      </fieldset>
    </fields>
  </config>

  <install>
    <sql>
      <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
    </sql>
  </install>
  <uninstall>
    <sql>
      <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
    </sql>
  </uninstall>
  
  <updateservers>
    <server type="extension" priority="1" name="Bears AI Chatbot Task Plugin Updates">https://raw.githubusercontent.com/N6REJ/bears_aichatbot/main/updates.xml</server>
  </updateservers>
</extension>
